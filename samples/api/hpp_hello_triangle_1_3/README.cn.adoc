////
 * Copyright (c) 2025, The Khronos Group
 *
 * SPDX-License-Identifier: Apache-2.0
 *
 * Licensed under the Apache License, Version 2.0 the "License";
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
////
= 使用 Vulkan-Hpp 的 Vulkan 1.3 Hello Triangle 特性示例

ifdef::site-gen-antora[]
TIP: 本示例源码位于 https://github.com/KhronosGroup/Vulkan-Samples/tree/main/samples/api/hpp_hello_triangle_1_3[Khronos Vulkan Samples GitHub 仓库]。
endif::[]

说明：这是 API 示例 https://github.com/KhronosGroup/Vulkan-Samples/tree/main/samples/api/hello_triangle_1_3[Hello Triangle 1.3] 的 HPP 版本，演示如何使用由 Vulkan-Hpp 提供的 Vulkan C{pp} 绑定。

本示例展示如何使用 Vulkan 1.3 核心特性渲染一个简单的三角形，较传统 “Hello Triangle” 做了如下现代化改造：

- 动态渲染（Dynamic Rendering）
- Synchronization2（同步 2）
- 扩展动态状态（Extended Dynamic State）
- 顶点缓冲（Vertex Buffers）

## 概览

该示例将一个带颜色的三角形渲染到屏幕上，演示如何：

- 在初始化阶段启用 Vulkan 1.3 的相关特性；
- 使用动态渲染以简化渲染管线；
- 采用 Synchronization2 API 进行更清晰的同步；
- 利用扩展动态状态减少管线复杂度；
- 使用顶点缓冲管理顶点数据（替代在着色器中硬编码顶点）。

## 关键特性

### 1. 动态渲染（Dynamic Rendering）

可在不预定义渲染通道（render pass）与帧缓冲（framebuffer）的情况下进行渲染。示例中：

- 不创建 `vk::RenderPass` 或 `vk::Framebuffer`；
- 使用 `vk::CommandBuffer::beginRendering()` / `endRendering()`；
- 在管线创建时通过 `vk::PipelineRenderingCreateInfo` 指定渲染细节。

### 2. Synchronization2（同步 2）

改进的同步 API，提供更细粒度的控制：

- 使用 `vk::CommandBuffer::pipelineBarrier2()`；
- 搭配 `vk::DependencyInfo` 与 `vk::ImageMemoryBarrier2` 精确描述依赖与布局转换。

### 3. 扩展动态状态（Extended Dynamic State）

在记录命令时设置更多管线状态，减少管线数量：

- 启用如 `vk::DynamicState::eCullMode`、`eFrontFace`、`ePrimitiveTopology`；
- 调用 `setCullMode()`、`setFrontFace()`、`setPrimitiveTopology()` 动态设置。

### 4. 顶点缓冲（Vertex Buffers）

通过顶点缓冲存储顶点，而非着色器硬编码：

- 定义顶点结构体与数据；
- 创建缓冲、分配内存并绑定顶点缓冲；

## 工作流程与依赖

- 初始化实例、设备、交换链；
- 设置顶点缓冲；
- 创建图形管线与动态状态；
- 记录命令并绘制；
- 清理资源。

依赖：Vulkan SDK 1.3+、支持相关特性的 GPU、GLM 库、GLSL 编译器。